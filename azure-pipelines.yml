trigger:
  - main

pr:
  autoCancel: 'true'

resources:
  repositories:
    - repository: templates
      type: git
      name: nhsuk.tools.packages.pipeline.templates
      ref: task/PROD-770_migrate_chartcomp_to_lz

extends:
  template: storybook-deploy.yml@templates 
  parameters:
    Project:
        Name: 'NHSUK Tools Package - Chart Components'
        RepositoryName: 'nhsuk.tools.chart-components'
        ShortName: 'toolschrtcomp'
    PublishStorybook: true
    PublishLocation: 'public'
    AgentPool: 'Azure Pipelines'
    AgentImageName: 'Ubuntu 24.04'
    TerraformCodePath: '$(System.DefaultWorkingDirectory)/platform/src'
    PlatformDeployPrefix: 'Platform_deployment_to_'
    Regions:
      - name: 'uksouth'
        shortName: 'uks'
        isPrimary: true
    Environments:
      Integration:
        shortName: int
        enabled: true
        dependsOn:
          - PreDeploySetup
  
   
